<html>

<body>
  <div>
    <%- include partials/head.ejs %>
  </div>

  <div class="header-blue">
    <div class="container" style="padding:15px 15px;padding-top:30px;padding-bottom:200px;">
      <div>

        <h1 style="color:#ffffff;margin-bottom:20px;">Edit Account</h1>
      </div>
                  <%- include partials/breadcrumb.ejs%>
      <div>
          <div class="card-group">
            <div class="card">
              <div class="card-header">
                <h5 class="mb-0"></h5>
              </div>
              <div class="card-body">
                <div class="table-responsive">
                  <table class="table">
                    <thead>
                      <tr>
                        <% if (user.local.role == 'admin' || user.local.role == 'engineer') { %>
                          <th>ID</th>
                          <% } %>
                            <th>First Name</th>
                            <th>Last Name</th>
                            <th>Email</th>
                            <th>Phone</th>
                            <th>Street</th>
                            <th>City</th>
                            <th>State</th>
                            <th>Zip</th>
                            <th>Contract Signed</th>
                            <th>Role</th>
                            <th>Ban </th>
                      </tr>
                    </thead>
                    <tbody>
                      <form action="/editUser/<%=id%>" method="post" class="d-flex align-self-center mx-auto" style="width:500px;height:500px;padding:0px;margin:0px;background-color:rgb(255,255,255);">
                        <tr>
                          <% if (user.local.role == 'admin'|| user.local.role == 'engineer') { %>
                            <td> <input type="text" class="form-control" name="id" value="<%= id %>" readonly> </td>
                            <td> <input type="text" class="form-control" name="userFName" value="<%=userFName %>" required></td>
                            <td> <input type="text" class="form-control" name="userLName" value="<%=userLName %>" required></td>
                            <td> <input type="text" class="form-control" name="userEmail" value="<%=userEmail %>" readonly></td>
                            <td> <input type="text" class="form-control" name="userPhone" value="<%=userPhone %>" pattern="\d{3}[\-]\d{3}[\-]\d{4}" required></td>
                            <td> <input type="text" class="form-control" name="userStreet" value="<%=userStreet %>" required></td>
                            <td> <input type="text" class="form-control" name="userCity" value="<%=userCity %>" required></td>
                            <td>
                              <select class="form-control form-group" name="userState">
                                                          <option value ="<%=userState%>"><%=userState%></option>
                                                        	<option value="AL">Alabama</option>
                                                        	<option value="AK">Alaska</option>
                                                        	<option value="AZ">Arizona</option>
                                                        	<option value="AR">Arkansas</option>
                                                        	<option value="CA">California</option>
                                                        	<option value="CO">Colorado</option>
                                                        	<option value="CT">Connecticut</option>
                                                        	<option value="DE">Delaware</option>
                                                        	<option value="DC">District Of Columbia</option>
                                                        	<option value="FL">Florida</option>
                                                        	<option value="GA">Georgia</option>
                                                        	<option value="HI">Hawaii</option>
                                                        	<option value="ID">Idaho</option>
                                                        	<option value="IL">Illinois</option>
                                                        	<option value="IN">Indiana</option>
                                                        	<option value="IA">Iowa</option>
                                                        	<option value="KS">Kansas</option>
                                                        	<option value="KY">Kentucky</option>
                                                        	<option value="LA">Louisiana</option>
                                                        	<option value="ME">Maine</option>
                                                        	<option value="MD">Maryland</option>
                                                        	<option value="MA">Massachusetts</option>
                                                        	<option value="MI">Michigan</option>
                                                        	<option value="MN">Minnesota</option>
                                                        	<option value="MS">Mississippi</option>
                                                        	<option value="MO">Missouri</option>
                                                        	<option value="MT">Montana</option>
                                                        	<option value="NE">Nebraska</option>
                                                        	<option value="NV">Nevada</option>
                                                        	<option value="NH">New Hampshire</option>
                                                        	<option value="NJ">New Jersey</option>
                                                        	<option value="NM">New Mexico</option>
                                                        	<option value="NY">New York</option>
                                                        	<option value="NC">North Carolina</option>
                                                        	<option value="ND">North Dakota</option>
                                                        	<option value="OH">Ohio</option>
                                                        	<option value="OK">Oklahoma</option>
                                                        	<option value="OR">Oregon</option>
                                                        	<option value="PA">Pennsylvania</option>
                                                        	<option value="RI">Rhode Island</option>
                                                        	<option value="SC">South Carolina</option>
                                                        	<option value="SD">South Dakota</option>
                                                        	<option value="TN">Tennessee</option>
                                                        	<option value="TX">Texas</option>
                                                        	<option value="UT">Utah</option>
                                                        	<option value="VT">Vermont</option>
                                                        	<option value="VA">Virginia</option>
                                                        	<option value="WA">Washington</option>
                                                        	<option value="WV">West Virginia</option>
                                                        	<option value="WI">Wisconsin</option>
                                                        	<option value="WY">Wyoming</option>
                                                        </select>
                            </td>
                            <td> <input type="text" class="form-control" name="userZip" value="<%=userZip %>" pattern="(\d{5}([\-]\d{4})?)" required></td>
                            <td>  <input type="radio" name="userContract" value="true" <%if (userContract){%> checked <%}%> > Yes<br>
                              <input type="radio" name="userContract" value="false" <%if (!userContract){%> checked <%}%> > No <br></td>
                            <% if (user.id == id) { %>
                              <td> <input type="text" class="form-control" name="userRole" value="<%= userRole %>" readonly > </td>
                              <% } else { %>
                                <td> <select class="form-control form-group" name="userRole" value="<%userRole%>">
                                <option value=<%= userRole%>> <% if (userRole == "user") { %> client <%} else{%> <%=userRole%>  <%}%> </option>
                                <option value="user">Client</option>
                                <option value="engineer">Engineer</option>
                                <option value="finance">Finance</option>
                                <option value="admin">Admin</option>
                              </select></td>
                              <% if (userRole != 'admin' || user.local.role == "engineer") {%>
                              <td>  <input type="radio" name="userBan" value="true" <%if (userBan){%> checked <%}%> > Yes<br>
                                <input type="radio" name="userBan" value="false" <%if (!userBan){%> checked <%}%> > No<br></td>
                                <%}%>
                                <% } %>

                                  <% } else if (user.local.role == 'user' || user.local.role == 'finance' ) { %>
                                    <td name="id" hidden>
                                      <%=id%>
                                    </td>

                                    <td> <input type="text" class="form-control" name="userFName" value="<%=userFName %>" required></td>
                                    <td> <input type="text" class="form-control" name="userLName" value="<%=userLName %>" required></td>
                                    <td> <input type="text" class="form-control" name="userEmail" value="<%=userEmail %>" readonly></td>
                                    <td> <input type="text" class="form-control" name="userPhone" value="<%=userPhone %>" pattern="\d{3}[\-]\d{3}[\-]\d{4}" required></td>
                                    <td> <input type="text" class="form-control" name="userStreet" value="<%=userStreet %>" required></td>
                                    <td> <input type="text" class="form-control" name="userCity" value="<%=userCity %>" required></td>

                                    <td>
                                      <select type="text" class="form-control form-group" name="userState">
                                                          <option value ="<%=userState%>"><%=userState%></option>
                                                          <option value="AL">Alabama</option>
                                                        	<option value="AK">Alaska</option>
                                                        	<option value="AZ">Arizona</option>
                                                        	<option value="AR">Arkansas</option>
                                                        	<option value="CA">California</option>
                                                        	<option value="CO">Colorado</option>
                                                        	<option value="CT">Connecticut</option>
                                                        	<option value="DE">Delaware</option>
                                                        	<option value="DC">District Of Columbia</option>
                                                        	<option value="FL">Florida</option>
                                                        	<option value="GA">Georgia</option>
                                                        	<option value="HI">Hawaii</option>
                                                        	<option value="ID">Idaho</option>
                                                        	<option value="IL">Illinois</option>
                                                        	<option value="IN">Indiana</option>
                                                        	<option value="IA">Iowa</option>
                                                        	<option value="KS">Kansas</option>
                                                        	<option value="KY">Kentucky</option>
                                                        	<option value="LA">Louisiana</option>
                                                        	<option value="ME">Maine</option>
                                                        	<option value="MD">Maryland</option>
                                                        	<option value="MA">Massachusetts</option>
                                                        	<option value="MI">Michigan</option>
                                                        	<option value="MN">Minnesota</option>
                                                        	<option value="MS">Mississippi</option>
                                                        	<option value="MO">Missouri</option>
                                                        	<option value="MT">Montana</option>
                                                        	<option value="NE">Nebraska</option>
                                                        	<option value="NV">Nevada</option>
                                                        	<option value="NH">New Hampshire</option>
                                                        	<option value="NJ">New Jersey</option>
                                                        	<option value="NM">New Mexico</option>
                                                        	<option value="NY">New York</option>
                                                        	<option value="NC">North Carolina</option>
                                                        	<option value="ND">North Dakota</option>
                                                        	<option value="OH">Ohio</option>
                                                        	<option value="OK">Oklahoma</option>
                                                        	<option value="OR">Oregon</option>
                                                        	<option value="PA">Pennsylvania</option>
                                                        	<option value="RI">Rhode Island</option>
                                                        	<option value="SC">South Carolina</option>
                                                        	<option value="SD">South Dakota</option>
                                                        	<option value="TN">Tennessee</option>
                                                        	<option value="TX">Texas</option>
                                                        	<option value="UT">Utah</option>
                                                        	<option value="VT">Vermont</option>
                                                        	<option value="VA">Virginia</option>
                                                        	<option value="WA">Washington</option>
                                                        	<option value="WV">West Virginia</option>
                                                        	<option value="WI">Wisconsin</option>
                                                        	<option value="WY">Wyoming</option>
                                                        </select>
                                    </td>
                                    <td> <input type="text" class="form-control" name="userZip" value="<%=userZip %>" pattern="(\d{5}([\-]\d{4})?)" required></td>
                                    <td> <input type="text" class="form-control" name="userContract" value="<%= userContract %>" readonly></td>
                                    <td> <input type="text" class="form-control" name="userRole" value="<%= userRole %>" readonly> </td>
                                    <td hidden> <input type="text" class="form-control" name="userBan" value="<%= userBan %>" readonly hidden> </td>

                                    <% } else { %>
                                      <p>Hey terra!</p>
                                      <% } %>

                        </tr>
                        <button class="btn btn-primary btn-block" type="submit" style="background-color:rgb(4,148,74);">Submit</button>
                      </form>
                    </tbody>
                  </table>
                  <% if(user.id == id) {%>
                  <a href="/editPassword/<%=id%>"><button class="btn btn-primary btn-block" style="background-color:rgb(4,148,74);"> Edit Password </button></a>
                  <%}%>
                </div>
              </div>
            </div>
          </div>
      </div>
    </div>
  </div>
  <script src="assets/js/jquery.min.js"></script>
  <script src="assets/bootstrap/js/bootstrap.min.js"></script>
  <script src="assets/js/bs-animation.js"></script>
  <div>
      <% include partials/footer.ejs %>
  </div>
</body>

</html>
